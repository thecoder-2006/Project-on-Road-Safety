<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeRoads - AI-Powered Road Safety Platform</title>
    
    <!-- Tailwind CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Google Maps API (Replace YOUR_API_KEY with actual key) -->
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=geometry,places"></script>
</head>
<body class="bg-gray-50">
    
    <!-- Weather Alert Banner (Hidden by default) -->
    <div id="weatherAlert" class="hidden bg-orange-500 text-white px-6 py-4 shadow-lg">
        <div class="max-w-7xl mx-auto flex items-center justify-between flex-wrap gap-4">
            <div class="flex items-center gap-3">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                </svg>
                <span class="font-bold text-lg" id="alertMessage">CAUTION: Low Visibility Reported</span>
                <span class="text-sm opacity-90" id="alertDetails"></span>
            </div>
            <span class="text-xs opacity-75" id="alertTimestamp"></span>
        </div>
    </div>

    <!-- Navigation Bar -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
                        <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                        </svg>
                    </div>
                    <span class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                        SafeRoads
                    </span>
                </div>

                <!-- Mode Toggle (Desktop) -->
                <div class="hidden md:flex items-center gap-4">
                    <div class="flex bg-gray-100 rounded-xl p-1 shadow-inner">
                        <button id="citizenBtn" class="mode-btn active px-6 py-2 rounded-lg font-semibold transition-all">
                            Citizen Portal
                        </button>
                        <button id="authorityBtn" class="mode-btn px-6 py-2 rounded-lg font-semibold transition-all">
                            Authority Dashboard
                        </button>
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <button id="mobileMenuBtn" class="md:hidden p-2 rounded-lg hover:bg-gray-100">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t px-4 py-4">
            <div class="flex flex-col gap-2">
                <button class="mobile-mode-btn px-4 py-3 rounded-lg text-left font-semibold bg-blue-50 text-blue-600" data-mode="citizen">
                    Citizen Portal
                </button>
                <button class="mobile-mode-btn px-4 py-3 rounded-lg text-left font-semibold hover:bg-gray-50" data-mode="authority">
                    Authority Dashboard
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <div class="max-w-7xl mx-auto px-4 py-8">
        
        <!-- CITIZEN PORTAL -->
        <div id="citizenPortal" class="portal-content">
            
            <!-- Hero Section -->
            <div class="bg-gradient-to-r from-blue-600 via-purple-600 to-pink-500 rounded-2xl p-8 md:p-12 text-white shadow-2xl mb-8">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">Report. Track. Stay Safe.</h1>
                <p class="text-lg md:text-xl opacity-90 mb-6">AI-powered platform for safer roads in your community</p>
                <div class="flex gap-4 text-sm">
                    <div class="flex items-center gap-2">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        <span>Gemini 2.0 Powered</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        <span>Real-time Tracking</span>
                    </div>
                </div>
            </div>

            <!-- Quick Action Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                
                <!-- AI Scanner Card -->
                <div class="quick-action-card bg-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-all cursor-pointer transform hover:-translate-y-1" data-section="scanner">
                    <div class="w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center mb-4">
                        <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold mb-2">AI Damage Scanner</h3>
                    <p class="text-gray-600">Upload photo for instant AI analysis using Gemini 2.0 Flash</p>
                    <div class="mt-4 text-blue-600 font-semibold flex items-center gap-2">
                        <span>Start Scanning</span>
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </div>
                </div>

                <!-- Tenders Card -->
                <div class="quick-action-card bg-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-all cursor-pointer transform hover:-translate-y-1" data-section="tenders">
                    <div class="w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center mb-4">
                        <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Check Tenders</h3>
                    <p class="text-gray-600">View ongoing road projects and budget transparency</p>
                    <div class="mt-4 text-purple-600 font-semibold flex items-center gap-2">
                        <span>View Projects</span>
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </div>
                </div>

                <!-- Emergency SOS Card -->
                <div class="quick-action-card bg-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-all cursor-pointer transform hover:-translate-y-1" data-section="emergency">
                    <div class="w-14 h-14 bg-red-100 rounded-xl flex items-center justify-center mb-4">
                        <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Emergency SOS</h3>
                    <p class="text-gray-600">Find nearest emergency services based on your location</p>
                    <div class="mt-4 text-red-600 font-semibold flex items-center gap-2">
                        <span>Get Help Now</span>
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Content Sections -->
            
            <!-- AI Scanner Section -->
            <div id="scannerSection" class="content-section hidden bg-white rounded-2xl p-8 shadow-lg mb-8">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <h2 class="text-3xl font-bold">AI Road Damage Scanner</h2>
                </div>

                <div id="uploadArea" class="border-3 border-dashed border-gray-300 rounded-2xl p-12 text-center hover:border-blue-500 transition-all cursor-pointer">
                    <input type="file" id="imageInput" accept="image/*,video/*" class="hidden">
                    <svg class="w-20 h-20 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    <button onclick="document.getElementById('imageInput').click()" class="bg-blue-600 text-white px-8 py-4 rounded-xl hover:bg-blue-700 transition-all font-semibold text-lg shadow-lg">
                        Upload Road Photo/Video
                    </button>
                    <p class="text-gray-500 mt-4">Powered by <span class="font-semibold text-blue-600">Gemini 2.0 Flash</span> & <span class="font-semibold text-purple-600">Nano</span></p>
                    <p class="text-sm text-gray-400 mt-2">Supports JPG, PNG, MP4 - Max 10MB</p>
                </div>

                <div id="imagePreview" class="hidden mt-6">
                    <img id="previewImage" class="max-w-full max-h-96 mx-auto rounded-xl shadow-lg">
                    <button onclick="resetUpload()" class="mt-4 text-blue-600 hover:underline font-semibold">Upload Different Image</button>
                </div>

                <div id="analyzingLoader" class="hidden mt-8 text-center">
                    <div class="inline-block animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600"></div>
                    <p class="mt-4 text-gray-600 font-semibold text-lg">Analyzing with Gemini AI...</p>
                    <p class="text-sm text-gray-500 mt-2">Processing damage detection</p>
                </div>

                <div id="resultsArea" class="hidden mt-8"></div>
            </div>

            <!-- Tenders Section -->
            <div id="tendersSection" class="content-section hidden bg-white rounded-2xl p-8 shadow-lg mb-8">
                <h2 class="text-3xl font-bold mb-6">Road Project Tenders & Transparency</h2>
                
                <div class="mb-6">
                    <input type="text" id="projectSearch" placeholder="Search by project name or area..." class="w-full px-6 py-4 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:outline-none text-lg">
                </div>

                <div id="projectsList" class="space-y-6"></div>
            </div>

            <!-- Emergency Section -->
            <div id="emergencySection" class="content-section hidden">
                <div class="bg-gradient-to-r from-red-500 to-pink-500 rounded-2xl p-8 text-white shadow-2xl mb-6">
                    <h2 class="text-3xl font-bold mb-2">Emergency Services Near You</h2>
                    <p class="text-lg opacity-90">Location-based emergency contact finder</p>
                </div>

                <div class="bg-white rounded-2xl p-8 shadow-lg mb-6">
                    <h3 class="text-2xl font-bold mb-6">Nearest Emergency Services</h3>
                    <div id="emergencyList" class="space-y-4"></div>
                </div>

                <div class="bg-white rounded-2xl p-2 shadow-lg" style="height: 500px;">
                    <div id="map" style="width: 100%; height: 100%; border-radius: 1rem;"></div>
                </div>
            </div>

        </div>

        <!-- AUTHORITY DASHBOARD -->
        <div id="authorityPortal" class="portal-content hidden">
            
            <div class="flex flex-col lg:flex-row gap-6">
                
                <!-- Sidebar -->
                <div class="lg:w-64 bg-white rounded-2xl p-6 shadow-lg">
                    <h3 class="font-bold text-lg mb-4 text-gray-700">Dashboard Menu</h3>
                    <nav class="space-y-2">
                        <a href="#" class="dashboard-nav-link active flex items-center gap-3 px-4 py-3 rounded-xl">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                            </svg>
                            <span class="font-semibold">Priority Alerts</span>
                        </a>
                        <a href="#" class="dashboard-nav-link flex items-center gap-3 px-4 py-3 rounded-xl">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                            </svg>
                            <span class="font-semibold">Statistics</span>
                        </a>
                        <a href="#" class="dashboard-nav-link flex items-center gap-3 px-4 py-3 rounded-xl">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                            <span class="font-semibold">All Reports</span>
                        </a>
                    </nav>
                </div>

                <!-- Main Dashboard Content -->
                <div class="flex-1">
                    <div class="bg-white rounded-2xl p-8 shadow-lg">
                        <h2 class="text-3xl font-bold mb-6">High Priority Alerts</h2>
                        
                        <div class="overflow-x-auto">
                            <table class="w-full" id="alertsTable">
                                <thead>
                                    <tr class="border-b-2 border-gray-200">
                                        <th class="text-left py-4 px-4 font-bold text-gray-700">ID</th>
                                        <th class="text-left py-4 px-4 font-bold text-gray-700">Type</th>
                                        <th class="text-left py-4 px-4 font-bold text-gray-700">Location</th>
                                        <th class="text-left py-4 px-4 font-bold text-gray-700">Severity</th>
                                        <th class="text-left py-4 px-4 font-bold text-gray-700">Status</th>
                                        <th class="text-left py-4 px-4 font-bold text-gray-700">Date</th>
                                        <th class="text-left py-4 px-4 font-bold text-gray-700">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="alertsTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white mt-16 py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-lg font-semibold mb-2">SafeRoads - Building Safer Communities</p>
            <p class="text-gray-400 text-sm">Powered by Gemini 2.0, Google Maps & OpenWeatherMap</p>
            <p class="text-gray-500 text-xs mt-4">Â© 2026 SafeRoads. All rights reserved.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script type="module" src="js/main.js"></script>
    <script src="js/gemini-ai.js"></script>
    <script src="js/maps-logic.js"></script>
    <script src="js/weather.js"></script>

</body>
</html>